$env:PATH += ";C:\Users\ayman\ebank\e-bank\istio\istio-1.24.2\bin"
$env:PATH += ";C:\Users\ayman\Downloads"
istioctl version

kubectl create ns backend
kubectl label namespace default istio-injection=enabled

kubectl apply -f istio\istio-1.24.2\samples\addons -n istio-system

kubectl apply -f istio\istio-1.24.2\samples\bookinfo\platform\kube\bookinfo.yaml

kubectl apply -f  istio\istio-1.24.2\samples\bookinfo\networking\bookinfo-gateway.yaml


kubectl port-forward 

curl 10.96.80.132/productpage


curl 10.96.80.132/api/v1/products
while true; do
    echo "Running curl for productpage:"
    curl 10.100.89.59/
    curl 10.100.89.59/api/client/clients
    curl 10.100.89.59/api/finance/devise
     curl 10.100.89.59/api/transactions/clients/1
    sleep 2
done 



kubectl create namespace argo-rollouts
kubectl apply -n argo-rollouts -f https://github.com/argoproj/argo-rollouts/releases/latest/download/install.yaml
kubectl argo rollouts dashboard
